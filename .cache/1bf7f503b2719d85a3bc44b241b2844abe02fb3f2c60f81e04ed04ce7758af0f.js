{"source":"webpackJsonp([17],{1115:function(e,t,n){n(1177);var i=n(76)(n(1152),n(1223),null,null);i.options.__file=\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\Vue\\\\uche\\\\src\\\\views\\\\own-space\\\\own-space.vue\",i.esModule&&Object.keys(i.esModule).some(function(e){return\"default\"!==e&&\"__esModule\"!==e}),i.options.functional,e.exports=i.exports},1152:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i,o=n(133),s=(i=o)&&i.__esModule?i:{default:i},r=n(420);t.default={name:\"own-space\",data:function(){return{userEmp:[],userForm:{admin:\"\",name:\"\",cellphone:\"\",company:\"\",department:\"\"},uid:\"\",securityCode:\"\",phoneHasChanged:!1,save_loading:!1,identifyError:\"\",editPasswordModal:!1,savePassLoading:!1,oldPassError:\"\",identifyCodeRight:!1,hasGetIdentifyCode:!1,canGetIdentifyCode:!1,checkIdentifyCodeLoading:!1,inforValidate:{admin:[{required:!0,message:\"请输入登陆账号\",trigger:\"blur\"}],name:[{required:!0,message:\"请输入姓名\",trigger:\"blur\"}],cellphone:[{required:!0,message:\"请输入手机号码\"},{validator:function(e,t,n){/^1[0-9]{10}$/.test(t)?n():n(new Error(\"请输入正确格式的手机号\"))}}]},inputCodeVisible:!1,initPhone:\"\",gettingIdentifyCodeBtnContent:\"获取验证码\"}},methods:{init:function(){this.userEmp=JSON.parse(sessionStorage.getItem(\"user\")).employeeInfo,this.userForm.admin=this.userEmp.employeecode,this.userForm.name=this.userEmp.employeename,this.userForm.cellphone=this.userEmp.mobile,this.initPhone=this.userEmp.mobile,this.userForm.company=this.userEmp.corpid,this.userForm.department=this.userEmp.deptid},getIdentifyCode:function(){var e=this;this.hasGetIdentifyCode=!0,this.$refs.userForm.validate(function(t){if(t){e.canGetIdentifyCode=!0;var n=60,i=setInterval(function(){n>=0?(e.gettingIdentifyCodeBtnContent=n+\"秒后重试\",n-=1):(clearInterval(i),e.gettingIdentifyCodeBtnContent=\"获取验证码\",e.canGetIdentifyCode=!1)},1e3);e.inputCodeVisible=!0;var o={mobile:e.userForm.cellphone};(0,r.getNumber)(o).then(function(t){0==t.data.result.code?e.$Message.success(t.data.data):e.$Message.error(t.data.result.desc)})}})},cancelInputCodeBox:function(){this.inputCodeVisible=!1,this.userForm.cellphone=this.initPhone},submitCode:function(){var e=this;this.checkIdentifyCodeLoading=!0,0===this.securityCode.length?this.$Message.error(\"请填写短信验证码\"):setTimeout(function(){var t={mobile:e.userForm.cellphone,number:e.securityCode};(0,r.checkNumber)(t).then(function(t){0==t.data.result.code?(e.inputCodeVisible=!1,e.checkIdentifyCodeLoading=!1,e.$Message.success(\"验证码正确\")):e.$Message.error(t.data.result.desc)})},1e3)},cancelEditUserInfor:function(){this.$store.commit(\"removeTag\",\"ownspace_index\"),localStorage.pageOpenedList=(0,s.default)(this.$store.state.pageOpenedList);var e;e=this.$store.state.pageOpenedList.length>1?this.$store.state.pageOpenedList[1].name:this.$store.state.pageOpenedList[0].name,this.$router.push({name:e})},saveEdit:function(){var e=this;this.$refs.userForm.validate(function(t){t&&(e.phoneHasChanged&&e.userForm.cellphone!==e.initPhone?e.hasGetIdentifyCode?e.identifyCodeRight?e.saveInfoAjax():e.$Message.error(\"验证码错误，请重新输入\"):e.$Message.warning(\"请先点击获取验证码\"):e.saveInfoAjax())})},hasChangePhone:function(){this.phoneHasChanged=!0,this.hasGetIdentifyCode=!1,this.identifyCodeRight=!1},saveInfoAjax:function(){var e=this;this.save_loading=!0,setTimeout(function(){e.$Message.error(\"修改个人信息功能暂未开放！\"),e.save_loading=!1},1e3)}},mounted:function(){this.init()}}},1177:function(e,t){},1223:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",[n(\"Card\",[n(\"p\",{attrs:{slot:\"title\"},slot:\"title\"},[n(\"Icon\",{attrs:{type:\"person\"}}),e._v(\"\\n            个人信息\\n        \")],1),e._v(\" \"),n(\"div\",[n(\"Form\",{ref:\"userForm\",attrs:{model:e.userForm,\"label-width\":100,\"label-position\":\"right\",rules:e.inforValidate}},[n(\"FormItem\",{attrs:{label:\"用户账号：\",prop:\"admin\"}},[n(\"div\",{staticStyle:{display:\"inline-block\",width:\"300px\"}},[n(\"Input\",{model:{value:e.userForm.admin,callback:function(t){e.$set(e.userForm,\"admin\",t)},expression:\"userForm.admin\"}})],1)]),e._v(\" \"),n(\"FormItem\",{attrs:{label:\"用户姓名：\",prop:\"name\"}},[n(\"div\",{staticStyle:{display:\"inline-block\",width:\"300px\"}},[n(\"Input\",{model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,\"name\",t)},expression:\"userForm.name\"}})],1)]),e._v(\" \"),n(\"FormItem\",{attrs:{label:\"用户手机：\",prop:\"cellphone\"}},[n(\"div\",{staticStyle:{display:\"inline-block\",width:\"204px\"}},[n(\"Input\",{on:{\"on-keydown\":e.hasChangePhone},model:{value:e.userForm.cellphone,callback:function(t){e.$set(e.userForm,\"cellphone\",t)},expression:\"userForm.cellphone\"}})],1),e._v(\" \"),n(\"div\",{staticStyle:{display:\"inline-block\",position:\"relative\"}},[n(\"Button\",{attrs:{disabled:e.canGetIdentifyCode},on:{click:e.getIdentifyCode}},[e._v(e._s(e.gettingIdentifyCodeBtnContent))]),e._v(\" \"),e.inputCodeVisible?n(\"div\",{staticClass:\"own-space-input-identifycode-con\"},[n(\"div\",{staticStyle:{\"background-color\":\"white\",\"z-index\":\"110\",margin:\"10px\"}},[n(\"Input\",{attrs:{placeholder:\"请填写短信验证码\"},model:{value:e.securityCode,callback:function(t){e.securityCode=t},expression:\"securityCode\"}}),e._v(\" \"),n(\"div\",{staticStyle:{\"margin-top\":\"10px\",\"text-align\":\"right\"}},[n(\"Button\",{attrs:{type:\"ghost\"},on:{click:e.cancelInputCodeBox}},[e._v(\"取消\")]),e._v(\" \"),n(\"Button\",{attrs:{type:\"primary\",loading:e.checkIdentifyCodeLoading},on:{click:e.submitCode}},[e._v(\"确定\")])],1)],1)]):e._e()],1)]),e._v(\" \"),n(\"FormItem\",{attrs:{label:\"公司：\"}},[n(\"div\",{staticStyle:{display:\"inline-block\",width:\"300px\"}},[n(\"Input\",{model:{value:e.userForm.company,callback:function(t){e.$set(e.userForm,\"company\",t)},expression:\"userForm.company\"}})],1)]),e._v(\" \"),n(\"FormItem\",{attrs:{label:\"部门：\"}},[n(\"div\",{staticStyle:{display:\"inline-block\",width:\"300px\"}},[n(\"Input\",{model:{value:e.userForm.department,callback:function(t){e.$set(e.userForm,\"department\",t)},expression:\"userForm.department\"}})],1)]),e._v(\" \"),n(\"div\",[n(\"Button\",{staticStyle:{width:\"100px\"},attrs:{type:\"text\"},on:{click:e.cancelEditUserInfor}},[e._v(\"取消\")]),e._v(\" \"),n(\"Button\",{staticStyle:{width:\"100px\"},attrs:{type:\"primary\",loading:e.save_loading},on:{click:e.saveEdit}},[e._v(\"保存\")])],1)],1)],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});"}