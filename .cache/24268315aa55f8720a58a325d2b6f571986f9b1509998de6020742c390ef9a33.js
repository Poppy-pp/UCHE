{"source":"webpackJsonp([11],{1087:function(e,t,s){s(1178),s(1168);var r=s(76)(s(1131),s(1225),null,null);r.options.__file=\"C:\\\\Users\\\\Administrator\\\\Desktop\\\\Vue\\\\uche\\\\src\\\\views\\\\login.vue\",r.esModule&&Object.keys(r.esModule).some(function(e){return\"default\"!==e&&\"__esModule\"!==e}),r.options.functional,e.exports=r.exports},1131:function(e,t,s){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0});var o=r(s(133)),a=r(s(96)),i=r(s(111)),n=r(s(423)),l=s(420);t.default={data:function(){return{formInline:{username:\"\",password:\"\",remember_me:!0,type:\"\"},ruleInline:{username:[{required:!0,message:\"请填写用户名\",trigger:\"blur\"}],password:[{required:!0,message:\"请填写密码\",trigger:\"blur\"},{type:\"string\",min:3,message:\"密码长度不能小于3位\",trigger:\"blur\"}]},checked:!0,spinShow:!1,editPswDialogVisible:!1,editPswLoading:!1,pswForm:{mobile:\"\",password:\"\",passwordto:\"\",number:\"\",usertype:\"\"},pswRules:{mobile:[{required:!0,message:\"请输入账号！\",trigger:\"blur\"}],password:[{required:!0,message:\"请输入新密码！\",trigger:\"blur\"}],passwordto:[{required:!0,message:\"请再次密码！\",trigger:\"blur\"}],type:[{required:!0,message:\"请选择登陆端！\",trigger:\"blur\"}]},stepsCurrent:0,isGetCode:!1,djTime:60,tabValue:\"R\",tabName:\"R\",companyAdmin:!1,companyEmp:!0,ownerEmp:!0}},methods:{adminCompany:function(){this.tabValue=\"C\",this.tabClick(\"C\"),this.companyAdmin=!0,this.companyEmp=!1,this.ownerEmp=!1},returnLogin:function(){this.$router.go(0)},next:function(){this.stepsCurrent+=1},tabClick:function(e){this.tabName=e},handleSubmit:function(){var e=this;this.spinShow=!0,this.formInline.type=this.tabName,this.formInline.platform=\"Web\",i.default.post(\"/vasms-uche/login\",n.default.stringify(this.formInline)).then(function(t){if(0!=t.data.result.code)e.$Message.error(\"登录失败！\"+t.data.result.desc),e.spinShow=!1;else{sessionStorage.setItem(\"user\",(0,o.default)(t.data.data)),e.spinShow=!1;var s=\"\";if(null==t.data.data.employeeInfo?s=t.data.data.corporateInfo.corpname:null==t.data.data.corporateInfo&&(s=t.data.data.employeeInfo.employeename),a.default.set(\"user\",s),a.default.set(\"password\",e.formInline.password),e.$store.commit(\"setAvator\",\"https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3448484253,3685836170&fm=27&gp=0.jpg\"),\"iview_admin\"===e.formInline.username?a.default.set(\"access\",0):a.default.set(\"access\",1),e.$router.push({name:\"home_index\"}),e.checked){var r={name:e.formInline.username,psw:e.formInline.password,remember_me:e.checked,type:e.tabName};localStorage.setItem(\"rememberUser\",(0,o.default)(r))}else void 0!=JSON.parse(localStorage.getItem(\"rememberUser\"))&&localStorage.removeItem(\"rememberUser\")}}).catch(function(t){e.spinShow=!1,e.$Message.error(\"登录失败！\"+t)})},forgetPwsSubmit:function(){this.editPswDialogVisible=!0},getCode:function(){var e=this;if(\"\"!=this.pswForm.mobile){if(!this.isGetCode){this.interval=setInterval(function(){0==e.djTime?(clearInterval(e.interval),e.djTime=60,e.isGetCode=!1):e.djTime--},1e3),this.isGetCode=!0;var t={mobile:this.pswForm.mobile};(0,l.getNumber)(t).then(function(t){0==t.data.result.code?e.$Message.success(t.data.data):e.$Message.error(t.data.result.desc)})}}else this.$Message.error(\"请输入手机号！\")},checkCode:function(){var e=this;this.$refs.pswForm.validate(function(t){if(t){e.editPswLoading=!0;var s={mobile:e.pswForm.mobile,number:e.pswForm.number};(0,l.checkNumber)(s).then(function(t){e.editPswLoading=!1,0==t.data.result.code?e.stepsCurrent=1:e.$Message.error(t.data.result.desc)})}})},editPswSubmit:function(){var e=this;this.$refs.pswForm.validate(function(t){t&&(e.editPswLoading=!0,i.default.post(\"/vasms-uche/lostPassWord\",n.default.stringify(e.pswForm)).then(function(t){return e.editPswLoading=!1,4001==t.data.result.code?void e.$Message.error(\"密码设置失败！\"+t.data.result.desc):5001==t.data.result.code?void e.$Message.error(\"密码设置失败！\"+t.data.result.desc):(e.$Message.success(\"密码设置成功！\"),e.editPswDialogVisible=!1,void e.forgetClose())}).catch(function(t){e.editPswLoading=!1,e.$Message.error(\"密码设置失败！\"+t)}))})},forgetClose:function(){this.pswForm={mobile:\"\",password:\"\",passwordto:\"\",number:\"\",usertype:\"\"},this.djTime=60,this.isGetCode=!1,this.editPswLoading=!1,this.stepsCurrent=1,this.interval&&clearInterval(this.interval)}},mounted:function(){var e=JSON.parse(localStorage.getItem(\"rememberUser\"));void 0!=e?(this.checked=e.remember_me,this.formInline={username:e.name,password:e.psw,remember_me:!0,type:e.type}):this.formInline={username:\"\",password:\"\",remember_me:!0,type:this.tabName};var t=document.cookie.match(/[^ =;]+(?=\\=)/g);if(t)for(var s=t.length;s--;)document.cookie=t[s]+\"=0;expires=\"+new Date(0).toUTCString()}}},1168:function(e,t){},1178:function(e,t){},1179:function(e,t,s){e.exports=s.p+\"eb96f1d8dcdcbb47d442ded20198624b.png\"},1225:function(e,t,s){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"section\",{staticClass:\"login_simple_bac\"},[s(\"div\",{staticClass:\"login\",on:{keydown:function(t){if(!(\"button\"in t)&&e._k(t.keyCode,\"enter\",13,t.key))return null;e.handleSubmit(t)}}},[e._m(0),e._v(\" \"),s(\"div\",{staticClass:\"wrapper\"},[s(\"div\",{staticClass:\"container\"},[s(\"Card\",{staticClass:\"opacity\"},[s(\"Tabs\",{on:{\"on-click\":e.tabClick},model:{value:e.tabValue,callback:function(t){e.tabValue=t},expression:\"tabValue\"}},[e.companyEmp?s(\"TabPane\",{attrs:{label:\"企业员工\",icon:\"ios-people\",name:\"R\"}},[s(\"Form\",{ref:\"formInline\",staticClass:\"inputSize\",attrs:{model:e.formInline,rules:e.ruleInline,inline:\"\"}},[s(\"FormItem\",{staticStyle:{width:\"250px\"},attrs:{prop:\"username\"}},[s(\"Input\",{attrs:{size:\"large\",type:\"text\",placeholder:\"员工账号\"},model:{value:e.formInline.username,callback:function(t){e.$set(e.formInline,\"username\",t)},expression:\"formInline.username\"}},[s(\"Icon\",{attrs:{slot:\"prepend\",type:\"ios-person-outline\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"FormItem\",{staticStyle:{width:\"250px\"},attrs:{prop:\"password\"}},[s(\"Input\",{attrs:{size:\"large\",type:\"password\",placeholder:\"密码\"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,\"password\",t)},expression:\"formInline.password\"}},[s(\"Icon\",{attrs:{slot:\"prepend\",type:\"ios-locked-outline\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"FormItem\",{staticStyle:{width:\"250px\"}},[s(\"Button\",{staticClass:\"login_button_zq\",attrs:{type:\"primary\"},on:{click:function(t){e.handleSubmit(\"formInline\")}}},[e._v(\"登录\")])],1),e._v(\" \"),s(\"div\",{staticClass:\"rememberpsw\"},[s(\"Checkbox\",{staticClass:\"remember\",model:{value:e.checked,callback:function(t){e.checked=t},expression:\"checked\"}},[e._v(\"记住密码\")]),e._v(\" \"),s(\"a\",{staticClass:\"flowPsw\",attrs:{href:\"javascript:void(0);\"},on:{click:e.forgetPwsSubmit}},[e._v(\"忘记密码\")]),e._v(\" \"),s(\"a\",{on:{click:e.adminCompany}},[e._v(\"企业管理\")])],1)],1)],1):e._e(),e._v(\" \"),e.ownerEmp?s(\"TabPane\",{attrs:{label:\"个人登陆\",icon:\"android-person\",name:\"\"}},[s(\"Form\",{ref:\"formInline\",staticClass:\"inputSize\",attrs:{model:e.formInline,rules:e.ruleInline,inline:\"\"}},[s(\"FormItem\",{staticStyle:{width:\"250px\"},attrs:{prop:\"username\"}},[s(\"Input\",{attrs:{size:\"large\",type:\"text\",placeholder:\"个人账号\"},model:{value:e.formInline.username,callback:function(t){e.$set(e.formInline,\"username\",t)},expression:\"formInline.username\"}},[s(\"Icon\",{attrs:{slot:\"prepend\",type:\"ios-person-outline\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"FormItem\",{staticStyle:{width:\"250px\"},attrs:{prop:\"password\"}},[s(\"Input\",{attrs:{size:\"large\",type:\"password\",placeholder:\"密码\"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,\"password\",t)},expression:\"formInline.password\"}},[s(\"Icon\",{attrs:{slot:\"prepend\",type:\"ios-locked-outline\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"FormItem\",{staticStyle:{width:\"250px\"}},[s(\"Button\",{staticClass:\"login_button_zq\",attrs:{type:\"primary\"},on:{click:function(t){e.handleSubmit(\"formInline\")}}},[e._v(\"登录\")])],1),e._v(\" \"),s(\"div\",{staticClass:\"rememberpsw\"},[s(\"Checkbox\",{staticClass:\"remember\",model:{value:e.checked,callback:function(t){e.checked=t},expression:\"checked\"}},[e._v(\"记住密码\")]),e._v(\" \"),s(\"a\",{staticClass:\"flowPsw\",attrs:{href:\"javascript:void(0);\"},on:{click:e.forgetPwsSubmit}},[e._v(\"忘记密码\")])],1)],1)],1):e._e(),e._v(\" \"),e.companyAdmin?s(\"TabPane\",{attrs:{label:\"企业管理\",icon:\"android-car\",name:\"C\"}},[s(\"Form\",{ref:\"formInline\",staticClass:\"inputSize\",attrs:{model:e.formInline,rules:e.ruleInline,inline:\"\"}},[s(\"FormItem\",{staticStyle:{width:\"250px\"},attrs:{prop:\"username\"}},[s(\"Input\",{attrs:{size:\"large\",type:\"text\",placeholder:\"账号\"},model:{value:e.formInline.username,callback:function(t){e.$set(e.formInline,\"username\",t)},expression:\"formInline.username\"}},[s(\"Icon\",{attrs:{slot:\"prepend\",type:\"ios-person-outline\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"FormItem\",{staticStyle:{width:\"250px\"},attrs:{prop:\"password\"}},[s(\"Input\",{attrs:{size:\"large\",type:\"password\",placeholder:\"密码\"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,\"password\",t)},expression:\"formInline.password\"}},[s(\"Icon\",{attrs:{slot:\"prepend\",type:\"ios-locked-outline\"},slot:\"prepend\"})],1)],1),e._v(\" \"),s(\"FormItem\",{staticStyle:{width:\"250px\"}},[s(\"Button\",{staticClass:\"login_button_zq\",attrs:{type:\"primary\"},on:{click:function(t){e.handleSubmit(\"formInline\")}}},[e._v(\"登录\")])],1),e._v(\" \"),s(\"div\",{staticClass:\"rememberpsw\"},[s(\"Checkbox\",{staticClass:\"remember\",model:{value:e.checked,callback:function(t){e.checked=t},expression:\"checked\"}},[e._v(\"记住密码\")]),e._v(\" \"),s(\"a\",{staticClass:\"flowPsw\",attrs:{href:\"javascript:void(0);\"},on:{click:e.forgetPwsSubmit}},[e._v(\"忘记密码\")]),e._v(\" \"),s(\"a\",{on:{click:e.returnLogin}},[e._v(\"返回\")])],1)],1)],1):e._e()],1),e._v(\" \"),e.spinShow?s(\"Spin\",{attrs:{size:\"large\",fix:\"\"}}):e._e()],1)],1)])]),e._v(\" \"),s(\"Modal\",{staticClass:\"modal\",attrs:{title:\"忘记密码\",loading:\"\",\"ok-text\":\"确认修改\",width:\"400\"},on:{\"on-ok\":e.editPswSubmit,\"on-cancel\":function(t){e.editPswDialogVisible=!1},close:e.forgetClose},model:{value:e.editPswDialogVisible,callback:function(t){e.editPswDialogVisible=t},expression:\"editPswDialogVisible\"}},[s(\"Steps\",{attrs:{current:e.stepsCurrent}},[s(\"Step\",{attrs:{title:\"验证身份\",icon:\"paper-airplane\"}}),e._v(\" \"),s(\"Step\",{attrs:{title:\"设置新密码\",icon:\"ios-locked-outline\"}}),e._v(\" \"),s(\"Step\",{attrs:{title:\"完成\",icon:\"checkmark-circled\"}})],1),e._v(\" \"),s(\"Form\",{ref:\"pswForm\",attrs:{model:e.pswForm,\"label-width\":80,rules:e.pswRules}},[0==e.stepsCurrent?[s(\"FormItem\",{attrs:{label:\"手机号\",prop:\"mobile\"}},[s(\"Input\",{attrs:{placeholder:\"请输入账号\"},model:{value:e.pswForm.mobile,callback:function(t){e.$set(e.pswForm,\"mobile\",t)},expression:\"pswForm.mobile\"}})],1),e._v(\" \"),s(\"FormItem\",{attrs:{label:\"验证码\",prop:\"number\"}},[s(\"Input\",{attrs:{placeholder:\"请输入验证码\"},model:{value:e.pswForm.number,callback:function(t){e.$set(e.pswForm,\"number\",t)},expression:\"pswForm.number\"}},[s(\"Button\",{attrs:{slot:\"append\",type:\"ghost\"},on:{click:e.getCode},slot:\"append\"},[e._v(e._s(e.isGetCode?e.djTime+\"秒\":\"获取验证码\"))])],1)],1)]:e._e(),e._v(\" \"),1==e.stepsCurrent?[s(\"FormItem\",{attrs:{label:\"新密码\",prop:\"password\"}},[s(\"Input\",{attrs:{placeholder:\"请输入新密码\"},model:{value:e.pswForm.password,callback:function(t){e.$set(e.pswForm,\"password\",t)},expression:\"pswForm.password\"}})],1),e._v(\" \"),s(\"FormItem\",{attrs:{label:\"确认密码\",prop:\"passwordto\"}},[s(\"Input\",{attrs:{placeholder:\"请输入新密码\"},model:{value:e.pswForm.passwordto,callback:function(t){e.$set(e.pswForm,\"passwordto\",t)},expression:\"pswForm.passwordto\"}})],1),e._v(\" \"),s(\"FormItem\",{attrs:{label:\"账号类型\",prop:\"usertype\"}},[s(\"RadioGroup\",{attrs:{type:\"button\"},model:{value:e.pswForm.usertype,callback:function(t){e.$set(e.pswForm,\"usertype\",t)},expression:\"pswForm.usertype\"}},[s(\"Radio\",{attrs:{label:\"C\"}},[e._v(\"企业\")]),e._v(\" \"),s(\"Radio\",{attrs:{label:\"R\"}},[e._v(\"员工\")])],1)],1)]:e._e()],2),e._v(\" \"),s(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[0==e.stepsCurrent?s(\"Button\",{attrs:{type:\"primary\"},on:{click:e.checkCode}},[e._v(\"下一步\")]):e._e(),e._v(\" \"),1==e.stepsCurrent?s(\"Button\",{attrs:{type:\"primary\"},on:{click:e.editPswSubmit}},[e._v(\"提交\")]):e._e(),e._v(\" \"),s(\"Button\",{nativeOn:{click:function(t){e.editPswDialogVisible=!1}}},[e._v(\"取消\")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",{staticClass:\"ltitle\"},[t(\"img\",{attrs:{src:s(1179)}}),this._v(\" \"),t(\"span\",[this._v(\"万网优车智能管理平台\")])])}]},e.exports.render._withStripped=!0}});"}